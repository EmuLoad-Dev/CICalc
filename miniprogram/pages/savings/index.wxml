<!--pages/savings/index.wxml-->
<view class="container">
  <!-- 结果展示区域 -->
  <view class="result-section">
    <view class="section-title">计算结果</view>
    <view class="result-item">
      <text class="result-label">每月存入</text>
      <view class="result-value-wrapper">
        <text class="result-value highlight">{{monthlyDeposit}}</text>
        <text class="result-unit">元</text>
      </view>
    </view>
    <view class="result-item">
      <text class="result-label">总投资额</text>
      <view class="result-value-wrapper">
        <text class="result-value">{{totalInvestment}}</text>
        <text class="result-unit">元</text>
      </view>
    </view>
    <view class="result-item">
      <text class="result-label">最终资产</text>
      <view class="result-value-wrapper">
        <text class="result-value">{{finalAssets}}</text>
        <text class="result-unit">元</text>
      </view>
    </view>
    <view class="result-item">
      <text class="result-label">最终收益</text>
      <view class="result-value-wrapper">
        <text class="result-value highlight">{{finalReturn}}</text>
        <text class="result-unit">元</text>
      </view>
    </view>
    <view class="result-item">
      <text class="result-label">总收益率</text>
      <view class="result-value-wrapper">
        <text class="result-value highlight">{{totalReturnRate}}</text>
        <text class="result-unit">%</text>
      </view>
    </view>
  </view>

  <!-- 输入区域 -->
  <view class="input-section">
    <view class="section-title">参数输入</view>
    <view class="input-item">
      <text class="input-label">当前存款</text>
      <input 
        class="input-field" 
        type="digit" 
        value="{{currentDeposit}}" 
        placeholder="0"
        bindinput="onCurrentDepositInput"
        confirm-type="done"
      />
      <text class="input-unit">元</text>
    </view>

    <view class="input-item">
      <text class="input-label">目标存款</text>
      <input 
        class="input-field" 
        type="digit" 
        value="{{targetDeposit}}" 
        placeholder="0"
        bindinput="onTargetDepositInput"
        confirm-type="done"
      />
      <text class="input-unit">元</text>
    </view>

    <view class="input-item">
      <text class="input-label">预期年化</text>
      <input 
        class="input-field" 
        type="digit" 
        value="{{expectedAnnualRate}}" 
        placeholder="0"
        bindinput="onExpectedAnnualRateInput"
        confirm-type="done"
      />
      <text class="input-unit">%</text>
    </view>

    <view class="input-item">
      <text class="input-label">存款时长</text>
      <view class="toggle-group toggle-group-center toggle-group-duration">
        <view 
          class="toggle-btn toggle-btn-duration {{durationType === 'year' ? 'active' : ''}}"
          style="width: 90rpx; flex-shrink: 0; min-width: 90rpx; max-width: 90rpx;"
          data-type="year"
          bindtap="onDurationTypeChange"
        >
          年
        </view>
        <view 
          class="toggle-btn toggle-btn-duration {{durationType === 'month' ? 'active' : ''}}"
          style="width: 90rpx; flex-shrink: 0; min-width: 90rpx; max-width: 90rpx;"
          data-type="month"
          bindtap="onDurationTypeChange"
        >
          月
        </view>
        <view 
          class="toggle-btn toggle-btn-duration {{durationType === 'day' ? 'active' : ''}}"
          style="width: 90rpx; flex-shrink: 0; min-width: 90rpx; max-width: 90rpx;"
          data-type="day"
          bindtap="onDurationTypeChange"
        >
          天
        </view>
      </view>
      <input 
        class="input-field" 
        type="digit" 
        value="{{depositDuration}}" 
        placeholder="0"
        bindinput="onDepositDurationInput"
        confirm-type="done"
      />
      <text class="input-unit">{{durationType === 'year' ? '年' : durationType === 'month' ? '月' : '天'}}</text>
    </view>
  </view>

  <!-- 分享和收藏按钮 -->
  <view class="favorite-btn-wrapper">
    <button class="share-btn" open-type="share">
      <text>分享结果</text>
    </button>
    <view class="favorite-btn" bindtap="onSaveRecord">
      <text>收藏记录</text>
    </view>
  </view>

  <!-- 图表区域 -->
  <view class="chart-section">
    <chart 
      data="{{chartData}}" 
      title="资产增长曲线"
    ></chart>
  </view>
</view>
